# TaskCrony ログ機能・バージョンチェック機能 使用ガイド

## 📋 新機能概要

TaskCrony v1.1.0では以下の機能が追加されました：

### 🔍 ログ機能
- 全操作の詳細ログ記録
- リアルタイムログビューアー
- ログレベル別フィルタリング
- 自動ログローテーション

### 🔄 バージョンチェック機能
- 起動時の自動バージョンチェック
- 手動バージョンチェック
- 新バージョン通知とダウンロード案内

## 🚀 使用方法

### ログ機能の使い方

#### 1. ログビューアーを開く
```
メインフォーム → [ログ表示] ボタンをクリック
```

#### 2. ログビューアーの機能
- **更新**: 最新ログを手動で再読み込み
- **クリア**: 表示をクリア（ファイルは削除されません）
- **ログフォルダ**: ログファイル保存フォルダを開く
- **ログレベル**: INFO、WARN、ERROR、TASK、DEBUG別表示
- **自動スクロール**: 新しいログエントリに自動スクロール

#### 3. ログファイルの場所
```
TaskCrony.exe と同じフォルダ内の Logs フォルダ
例: C:\TaskCrony\Logs\TaskCrony_20250124.log
```

#### 4. ログの種類
- **INFO**: 一般的な操作情報
- **WARN**: 警告（処理は継続）
- **ERROR**: エラー（処理が失敗）
- **TASK**: タスク実行の成功/失敗
- **DEBUG**: デバッグ情報（リリース版では出力されません）

### バージョンチェック機能の使い方

#### 1. 自動チェック
- TaskCrony起動から5秒後に自動実行
- 新バージョンがある場合のみ通知ダイアログ表示
- インターネット接続が必要

#### 2. 手動チェック
```
メインフォーム → [更新チェック] ボタンをクリック
```

#### 3. 更新通知の対応
- **Yes**: ダウンロードページを開く
- **No**: 通知を閉じる

## 📁 ファイル構成

### 新規追加ファイル
```
TaskCrony/
├── Logger.cs                    # ログ機能クラス
├── VersionChecker.cs           # バージョンチェック機能クラス
├── LogViewerForm.cs            # ログビューアーフォーム
├── LogViewerForm.Designer.cs   # ログビューアーUI定義
└── Logs/                       # ログフォルダ（自動作成）
    └── TaskCrony_YYYYMMDD.log  # 日別ログファイル
```

### 機能統合
- `MainForm.cs`: ログ記録とバージョンチェック機能を統合
- `TaskCrony.csproj`: 必要パッケージを追加

## 🔧 設定とカスタマイズ

### ログ設定
```csharp
// Logger.cs で設定可能な項目
- ログファイル保存期間: 7日（変更可能）
- ログファイル名形式: TaskCrony_YYYYMMDD.log
- ログレベル: INFO/WARN/ERROR/TASK/DEBUG
```

### バージョンチェック設定
```csharp
// VersionChecker.cs で設定可能な項目
- チェック間隔: 起動時1回 + 手動
- GitHub API URL: 自動リリース用リポジトリ
- タイムアウト: 10秒
```

## 🎯 ログ活用例

### 1. トラブルシューティング
```
エラーが発生した場合 → ログビューアーでERRORレベルを確認
```

### 2. タスク実行履歴確認
```
ログレベル「TASK」を選択 → 成功/失敗の履歴を確認
```

### 3. システム監視
```
定期的にログフォルダの容量とエラー件数をチェック
```

## 🔄 バージョン管理ワークフロー

### 開発者向け
```bash
# 新バージョンリリース手順
1. TaskCrony.csproj のバージョンを更新
2. git commit & push origin master
3. GitHub Actions が自動でリリース作成
4. ユーザーに更新通知が配信される
```

### ユーザー向け
```
1. 更新通知を受信
2. [Yes] をクリックしてダウンロードページへ
3. 新しいZIPファイルをダウンロード
4. 既存フォルダに展開（設定は自動保持）
```

## 🛡️ セキュリティ考慮事項

### ログファイル
- 個人情報は記録されません
- ファイルパスが記録される場合があります
- 7日で自動削除されます

### バージョンチェック
- HTTPSで安全に通信
- GitHubの公開APIのみ使用
- 個人情報は送信されません

## 🔍 トラブルシューティング

### ログが表示されない
```
1. Logs フォルダの存在確認
2. ファイルアクセス権限の確認
3. ディスク容量の確認
```

### バージョンチェックが失敗する
```
1. インターネット接続の確認
2. ファイアウォール設定の確認
3. プロキシ設定の確認
```

### ログファイルが大きくなりすぎる
```
自動クリーンアップ機能により7日で削除されます
手動削除も可能: Logs フォルダ内のファイルを削除
```

## 📞 サポート

問題が発生した場合：
1. ログビューアーでエラー詳細を確認
2. GitHubリポジトリにIssueを作成
3. ログファイルの関連部分を添付

---

*TaskCrony v1.1.0 - ログ機能・バージョンチェック機能搭載*
