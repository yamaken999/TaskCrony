# 自動リリース設定ガイド

## 概要
GitHub Actionsを使用してmasterブランチへのプッシュ時に自動的にリリースを作成する仕組みです。

## 動作条件
以下のファイルが変更された場合に自動リリースが実行されます：
- C#ソースファイル（*.cs）
- プロジェクトファイル（*.csproj）
- README.md
- LICENSE.txt

## 自動リリースの流れ

### 1. ビルド処理
- .NET 8.0 環境でプロジェクトをビルド
- Windows x64向け自己完結型実行ファイルを生成
- 依存関係を含む約146MBのパッケージを作成

### 2. バージョン管理
- `TaskCrony.csproj`の`<Version>`タグからバージョンを自動取得
- 同じバージョンのタグが既に存在する場合はリリースをスキップ
- 新しいバージョンの場合のみリリースを作成

### 3. リリース作成
- GitHubリリースページに新しいリリースを作成
- 自動生成されたリリースノートを添付
- ZIPファイルをリリースアセットとしてアップロード

## バージョン更新方法

新しいリリースを作成するには、`TaskCrony.csproj`のバージョンを更新してください：

```xml
<PropertyGroup>
  <Version>1.2.0</Version>
  <AssemblyVersion>1.2.0.0</AssemblyVersion>
  <FileVersion>1.2.0.0</FileVersion>
</PropertyGroup>
```

## 手動でリリースを無効化する方法

自動リリースを一時的に無効にしたい場合：

1. `.github/workflows/release.yml`ファイルの先頭にコメントアウト
2. または、コミットメッセージに`[skip ci]`を含める

## トラブルシューティング

### リリースが作成されない場合
1. GitHub ActionsのPermissions設定を確認
2. `GITHUB_TOKEN`の権限が適切に設定されているか確認
3. ワークフローファイルの構文エラーがないか確認

### ビルドエラーの場合
1. ローカルで`dotnet build`が成功するか確認
2. 依存関係が正しくインストールされているか確認
3. .NET 8.0の互換性を確認

## セキュリティ注意事項
- `GITHUB_TOKEN`は自動的に提供されるため、手動設定不要
- リリースアセットは公開されるため、機密情報を含めないよう注意
- プライベートリポジトリでもActions分数の消費に注意

## カスタマイズ
リリースノートの内容や配布パッケージの構成は`.github/workflows/release.yml`で調整可能です。
